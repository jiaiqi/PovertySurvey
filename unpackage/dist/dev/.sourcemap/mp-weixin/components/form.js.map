{"version":3,"sources":["webpack:///D:/user/Documents/HBuilderProjects/PovertySurvey/components/form.vue?38d6","webpack:///D:/user/Documents/HBuilderProjects/PovertySurvey/components/form.vue?d25b","webpack:///D:/user/Documents/HBuilderProjects/PovertySurvey/components/form.vue?ed73","webpack:///D:/user/Documents/HBuilderProjects/PovertySurvey/components/form.vue?cc61","uni-app:///components/form.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AACoL;AACpL,gBAAgB,2LAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAsrB,CAAgB,orBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;ACc1sB;AACA,oCADA;AAEA;AACA;AACA,iBADA;AAEA,aAFA,sBAEA;AACA;AACA,OAJA,EADA;;AAOA;AACA,kBADA;AAEA,aAFA,sBAEA;AACA;AACA,OAJA,EAPA,EAFA;;;AAgBA;AACA;AACA;AACA,KAHA,EAhBA;;AAqBA,MArBA,kBAqBA;AACA;AACA,2BADA;AAEA,oBAFA;;AAIA,GA1BA;AA2BA,SA3BA,qBA2BA;AACA;AACA,GA7BA;AA8BA,SA9BA,qBA8BA;AACA;AACA,GAhCA;AAiCA;AACA,iBADA,yBACA,CADA,EACA;AACA;AACA;AACA,KAJA;AAKA,eALA,yBAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA,mCADA;AAEA,uBAFA;AAGA,wBAHA;;AAKA;AACA,SAdA;AAeA;AACA,KAxBA;AAyBA,eAzBA,uBAyBA,CAzBA,EAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA;AACA;AACA;;AAEA;AACA,OALA;AAMA,KAxCA;AAyCA,iBAzCA,2BAyCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA,OAVA;AAWA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KAhEA,EAjCA;;AAmGA;AACA;AACA;AACA;AACA;AACA,OAJA,EADA,EAnGA,E","file":"components/form.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./form.vue?vue&type=template&id=c6c56f02&\"\nvar renderjs\nimport script from \"./form.vue?vue&type=script&lang=js&\"\nexport * from \"./form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/form.vue\"\nexport default component.exports","export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form.vue?vue&type=template&id=c6c56f02&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"\">\r\n\t\t<!-- <scroll-view scroll-x=\"false\" scroll-y=\"true\"> -->\r\n\t\t\t<view v-for=\"(item, index) in allField\" :key=\"index\">\r\n\t\t\t\t<formItem :field=\"item\" \r\n\t\t\t\t:pageFormType=\"BxformType\"\r\n\t\t\t\tref=\"fitem\" @on-form-item=\"onItemButtons($event)\" @on-value-change=\"onValChange($event)\"></formItem>\r\n\t\t\t</view>\r\n\t\t<!-- </scroll-view> -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport formItem from './form-item.vue';\r\nexport default {\r\n\tcomponents: { formItem },\r\n\tprops: {\r\n\t\tfields: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tBxformType:{\r\n\t\t\ttype: String,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn 'form';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tfieldsData: function() {\r\n\t\t\treturn this.fields;\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tallField: this.fields,\r\n\t\t\tfieldModel: {}\r\n\t\t};\r\n\t},\r\n\tupdated() {\r\n\t\t// this.getAllField()\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getAllField()\r\n\t},\r\n\tmethods: {\r\n\t\tonItemButtons(e){\r\n\t\t\tthis.$emit('on-form-item',e)\r\n\t\t\treturn e\r\n\t\t},\r\n\t\tgetAllField(){\r\n\t\t\tconsole.log('getAllField',this.fields)\r\n\t\t\tif (this.fields.length > 0) {\r\n\t\t\t\tthis.allField = this.fields.map((itemData, index) => {\r\n\t\t\t\t\tthis.fieldModel[itemData.column] = itemData.value;\r\n\t\t\t\t\tlet item = this.fieldModel;\r\n\t\t\t\t\tif (itemData.hasOwnProperty('isShowExp') && item.hasOwnProperty(itemData.column)) {\r\n\t\t\t\t\t\titemData['showExp'] = this.evalInTo(itemData, item);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titemData['showExp'] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\titemData.valid = {\r\n\t\t\t\t\t\tcolumn: itemData.column,\r\n\t\t\t\t\t\tvalid: true,\r\n\t\t\t\t\t\tmsg: '不能为空!'\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn itemData;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonValChange(e) {\r\n\t\t\tconsole.log('e111', e);\r\n\t\t\tthis.fieldModel[e.column] = e.value;\r\n\t\t\tthis.allField = this.allField.map((item, index) => {\r\n\t\t\t\tif (item.column === e.column) {\r\n\t\t\t\t\titem.value = e.value;\r\n\t\t\t\t}\r\n\t\t\t\treturn item;\r\n\t\t\t});\r\n\t\t\tthis.allField = this.allField.map((items, index) => {\r\n\t\t\t\tlet item = this.fieldModel;\r\n\t\t\t\titems.showExp = items.isShowExp !== '' ? this.evalInTo(items, item) : true;\r\n\r\n\t\t\t\treturn items;\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetFieldModel() {\r\n\t\t\tlet valid = 0;\r\n\t\t\tlet showsNum = 0;\r\n\t\t\tconsole.log('this.$refs', this.$refs);\r\n\r\n\t\t\tthis.allField.map((item, index) => {\r\n\t\t\t\tthis.$refs.fitem[index].getValid();\r\n\t\t\t\tif (item.showExp) {\r\n\t\t\t\t\tshowsNum++;\r\n\t\t\t\t\tif (item.isRequire &&  item.valid.valid && item.value !== '') {\r\n\t\t\t\t\t\tvalid++;\r\n\t\t\t\t\t}else if(!item.isRequire){\r\n\t\t\t\t\t\tvalid++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (valid === showsNum) {\r\n\t\t\t\tconsole.log('表单校验通过', showsNum, valid, this.fieldModel);\r\n\t\t\t\treturn this.fieldModel;\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('表单校验失败', showsNum, valid, this.fieldModel);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\twatch:{\r\n\t\t\"fields\":{\r\n\t\t\thanlder:function(newval,old){\r\n\t\t\t\tconsole.log('newval',newval,this.allField)\r\n\t\t\t\tthis.getAllField()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"less\"></style>\r\n"],"sourceRoot":""}