{"version":3,"sources":["webpack:///D:/user/Documents/HBuilderProjects/PovertySurvey/components/bx-lazy-img/bx-lazy-img.vue?1fef","webpack:///D:/user/Documents/HBuilderProjects/PovertySurvey/components/bx-lazy-img/bx-lazy-img.vue?fea6","webpack:///D:/user/Documents/HBuilderProjects/PovertySurvey/components/bx-lazy-img/bx-lazy-img.vue?31f2","webpack:///D:/user/Documents/HBuilderProjects/PovertySurvey/components/bx-lazy-img/bx-lazy-img.vue?76c9","uni-app:///components/bx-lazy-img/bx-lazy-img.vue","webpack:///D:/user/Documents/HBuilderProjects/PovertySurvey/components/bx-lazy-img/bx-lazy-img.vue?b41a","webpack:///D:/user/Documents/HBuilderProjects/PovertySurvey/components/bx-lazy-img/bx-lazy-img.vue?df70"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoI;AACpI;AAC+D;AACL;AACsC;;;AAGhG;AACuL;AACvL,gBAAgB,2LAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,kGAAM;AACR,EAAE,2GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA4sB,CAAgB,2rBAAG,EAAC,C;;;;;;;;;;;;;;;;;;ACMhuB;AACA;AACA;AACA,kBADA;AAEA,aAFA,sBAEA;AACA;AACA,OAJA,EADA;;AAOA;AACA,kBADA;AAEA,oBAFA,EAPA;;AAWA;AACA,kBADA;AAEA,2BAFA,EAXA,EADA;;;AAiBA,MAjBA,kBAiBA;AACA;AACA,uBADA;;AAGA,GArBA;AAsBA,SAtBA,qBAsBA;;AAEA,GAxBA;AAyBA,SAzBA,qBAyBA;AACA;AACA;;AAEA,GA7BA;AA8BA;AACA,YADA,oBACA,EADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,WAFA,EAEA,KAFA;AAGA;AACA,OAfA;AAgBA,KArBA;AAsBA,cAtBA,wBAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAxCA;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAZA,MAYA;AACA;AACA,WAlBA;AAmBA,SApBA;AAqBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAxCA,MAwCA;AACA;AACA;AACA;AACA;;AAEA,KA1FA,EA9BA;;AA0HA;AACA;AACA;AACA;AACA,OAHA;AAIA,gBAJA,EADA,EA1HA,E;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAA+zC,CAAgB,2tCAAG,EAAC,C;;;;;;;;;;;ACAn1C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/bx-lazy-img/bx-lazy-img.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./bx-lazy-img.vue?vue&type=template&id=860bf9f0&scoped=true&\"\nvar renderjs\nimport script from \"./bx-lazy-img.vue?vue&type=script&lang=js&\"\nexport * from \"./bx-lazy-img.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bx-lazy-img.vue?vue&type=style&index=0&id=860bf9f0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"860bf9f0\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/bx-lazy-img/bx-lazy-img.vue\"\nexport default component.exports","export * from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bx-lazy-img.vue?vue&type=template&id=860bf9f0&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bx-lazy-img.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bx-lazy-img.vue?vue&type=script&lang=js&\"","<template>\n    <view >\n        <image mode=\"scaleToFill\" class=\"image-lazy-view no-load\" ref=\"vref\" onerror=\"this.src='/static/noneImg.png'\" src=\"/static/img/load.gif\" :data-src=\"item[imgColName]\"></image>\n    </view>\n</template>\n<script>\nexport default {\n    props:{\n        item:{\r\n\t\t\ttype: Object,\r\n\t\t\tdefault(){\r\n\t\t\t\treturn {}\r\n\t\t\t\t}\r\n\t\t},\r\n\t\timgColName:{\r\n\t\t  type: String,\r\n\t\t  default: \"img\"\r\n\t\t},\r\n\t\tclassName:{\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"main-image\"\r\n\t\t}\n    },\r\n\tdata(){\r\n\t\treturn {\r\n\t\t\timageElements:[]\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\t\r\n\t},\n    mounted(){\r\n\t\tlet self = this\r\n\t\t// self.imageLazy()\r\n\t\t\n    },\r\n\tmethods:{\r\n\t\tthrottle(fn, delay = 15, mustRun = 30) {      \r\n\t\t        let t_start = null     \r\n\t\t        let timer = null      \r\n\t\t        let context = this      \r\n\t\t        return function() {        \r\n\t\t            let t_current = +(new Date())        \r\n\t\t            let args = Array.prototype.slice.call(arguments)        \r\n\t\t            clearTimeout(timer)        \r\n\t\t            if(!t_start) {          \r\n\t\t                t_start = t_current        \r\n\t\t            }        \r\n\t\t            if(t_current - t_start > mustRun) {          \r\n\t\t                fn.apply(context, args)          \r\n\t\t                t_start = t_current        \r\n\t\t            } else {          \r\n\t\t                timer = setTimeout(() => {            \r\n\t\t                    fn.apply(context, args)          \r\n\t\t                }, delay)        \r\n\t\t            }      \r\n\t\t        }    \r\n\t\t    },\r\n\t\tinViewShow() {      \r\n\t\t\tlet len = this.imageElements.length      \r\n\t\t\tfor(let i = 0; i < len; i++) {        \r\n\t\t\t\tlet imageElement = this.imageElements[i]        \r\n\t\t\t\tconst rect = imageElement.getBoundingClientRect()        \r\n\t\t\t\t// 出现在视野的时候加载图片        \r\n\t\t\t\tif(rect.top < document.documentElement.clientHeight) {          \r\n\t\t\t\t\timageElement.src = imageElement.dataset.src          \r\n\t\t\t\t\t// 移除掉已经显示的          \r\n\t\t\t\t\tthis.imageElements.splice(i, 1)          \r\n\t\t\t\t\tlen--          \r\n\t\t\t\t\ti--          \r\n\t\t\t\t\tif(this.imageElements.length === 0) {            \r\n\t\t\t\t\t   // 如果全部都加载完 则去掉滚动事件监听            \r\n\t\t\t\t\t\tdocument.removeEventListener('scroll', this._throttleFn)         \r\n\t\t\t\t\t }        \r\n\t\t\t\t}      \r\n\t\t\t}    \r\n\t\t},\r\n\t\timageLazy:function(e){\r\n\t\t\tlet self = this\r\n\t\t\tthis.imageElements = Array.prototype.slice.call(document.querySelectorAll('.no-load'))\r\n\t\t\tif (\"IntersectionObserver\" in window) {   \r\n\t\t\t\tlet child = this.$refs.vref;\r\n\t\t\t\tlet observer = new IntersectionObserver(entries => {\r\n\t\t\t\t    entries.forEach(item => {\r\n\t\t\t\t\t\t// console.log(item)\r\n\t\t\t\t\t\tlet lazyImage = item.target\r\n\t\t\t\t\t\t let imgUrl = item.target.dataset.src\r\n\t\t\t\t        if(item.isIntersecting){\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t \r\n\t\t\t\t            // item.target.childNodes[0].style.backgroundImage =  \"url(\"+ item.target.dataset.src +\")\"\r\n\t\t\t\t\t\t\tif(imgUrl){\r\n\t\t\t\t\t\t\t\titem.target.classList.remove(\"no-load\") \r\n\t\t\t\t\t\t\t\titem.target.src = imgUrl\r\n\t\t\t\t\t\t\t\titem.target.childNodes[0].style.backgroundImage =  \"url(\"+ imgUrl +\")\"\r\n\t\t\t\t\t\t\t\titem.target.childNodes[1].src = imgUrl\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// observer.unobserve(lazyImage)       \r\n\t\t\t\t        }else{\r\n\t\t\t\t\t\t}\r\n\t\t\t\t    })\r\n\t\t\t\t})\r\n\t\t\t\tobserver.observe(child._vnode.elm)\r\n\t\t\t\t\r\n\t\t\t    // let lazyImageObserver = new IntersectionObserver((entries, observer) => {          \r\n\t\t\t    //     entries.forEach((entry, index) => {            \r\n\t\t\t    //         // 如果元素可见   \r\n\t\t\t\t\t\t\t// \t console.log(\"lazyImage\",entry)\r\n\t\t\t    //         if (entry.intersectionRatio > 0) {              \r\n\t\t\t    //             let lazyImage = entry.target      \r\n\t\t\t\t\t\t\t// \t\tconsole.log(\"lazyImage\",lazyImage)\r\n\t\t\t    //             lazyImage.src = lazyImage.dataset.src              \r\n\t\t\t    //             lazyImage.classList.remove(\"no-load\")              \r\n\t\t\t    //             lazyImageObserver.unobserve(lazyImage)              \r\n\t\t\t    //             // this.lazyImages.splice(index, 1)            \r\n\t\t\t    //         }          \r\n\t\t\t    //     })        \r\n\t\t\t    // })        \r\n\t\t\t     // lazyImageObserver.observe(lazyImage);       \r\n\t\t\t}else{\r\n\t\t\t\tself.inViewShow()        \r\n\t\t\t\tself._throttleFn = self.throttle(self.inViewShow)        \r\n\t\t\t\twindow.addEventListener('scroll', self._throttleFn.bind(self))\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n\twatch:{\r\n\t\t\"item\":{\r\n\t\t\thandler:function(nVal,oVal){\r\n\t\t\t\tthis.imageLazy()\r\n\t\t\t},\r\n\t\t\tdeep:true\r\n\t\t}\r\n\t}\n}\n</script>\r\n<style lang=\"less\" scoped>\r\n\t.image-lazy-view{\r\n\t\theight: 100%;\r\n\t\twidth:100% !important;\r\n\t\t\r\n\t}\r\n\t.no-load{\r\n\t\t// background: url('/static/img/load.gif') no-repeat center; \r\n\t}\r\n</style>","import mod from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bx-lazy-img.vue?vue&type=style&index=0&id=860bf9f0&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bx-lazy-img.vue?vue&type=style&index=0&id=860bf9f0&lang=less&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1596181229329\n      var cssReload = require(\"D:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}